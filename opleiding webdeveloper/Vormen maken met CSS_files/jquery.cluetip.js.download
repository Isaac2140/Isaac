!function(t){t.cluetip={version:"1.2.5",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3>','<div class="cluetip-inner ui-widget-content ui-cluetip-content"></div>',"</div>",'<div class="cluetip-extra"></div>','<div class="cluetip-arrows ui-state-default"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(){return!0},onShow:function(){},onHide:function(){},ajaxCache:!0,ajaxProcess:function(t){return t=t.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var e,i="cluetip ui-widget ui-widget-content ui-cluetip",o={},a=0,l=0;t.fn.attrProp=t.fn.prop||t.fn.attr,t.fn.cluetip=function(s,n){function c(e,i){var o=e||"";return i=i||"","object"==typeof i?t.each(i,function(t,e){o+="-"+t+"-"+e}):"string"==typeof i&&(o+=i),o}function r(e,i,o){var a="",l=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(t.support.boxShadow){l&&(a="1px 1px "+l+"px rgba(0,0,0,0.5)");return e.css(t.support.boxShadow,a),!1}var s=e.find(".cluetip-drop-shadow");if(l==s.length)return s;s.remove();for(var n=[],c=0;l>c;)n[c++]='<div style="top:'+c+"px;left:"+c+'px;"></div>';return o=t(n.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:g-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(e)}var u,p,d,f,h,v;if("object"==typeof s&&(n=s,s=null),"destroy"==s){var m=this.data("cluetip");if(m)return t(m.selector).remove(),t.removeData(this,"title"),t.removeData(this,"cluetip"),t(document).unbind(".cluetip"),this.unbind(".cluetip")}n=t.extend(!0,{},t.cluetip.defaults,n||{}),a++;var g,x=t.cluetip.backCompat||!n.multiple?"cluetip":"cluetip-"+a,b="#"+x,w=t.cluetip.backCompat?"#":".",y=t.cluetip.setup.insertionType,S=t.cluetip.setup.insertionElement||"body";y=/appendTo|prependTo|insertBefore|insertAfter/.test(y)?y:"appendTo",u=t(b),u.length||(u=t(t.cluetip.template)[y](S).attr("id",x).css({position:"absolute",display:"none"}),g=+n.cluezIndex,d=u.find(w+"cluetip-outer").css({position:"relative",zIndex:g}),p=u.find(w+"cluetip-inner"),f=u.find(w+"cluetip-title")),e=t("#cluetip-waitimage"),e.length||(e=t("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"})),e.insertBefore(u).hide();var I=(parseInt(u.css("paddingLeft"),10)||0)+(parseInt(u.css("paddingRight"),10)||0);return this.each(function(a){function m(){return!1}function x(t,e){var i=t.status;e.beforeSend(t.xhr,e),"error"==i?e[i](t.xhr,t.textStatus):"success"==i&&e[i](t.data,t.textStatus,t.xhr),e.complete(t.xhr,e.textStatus)}var y=this,S=t(this),C=t.extend(!0,{},n,t.metadata?S.metadata():t.meta?S.data():S.data("cluetip")||{}),T=!1,k=!1,j=0,z=C[C.attribute]||("href"==C.attribute?S.attr(C.attribute):S.attrProp(C.attribute)||S.attr(C.attribute)),P=C.cluetipClass;if(g=+C.cluezIndex,S.data("cluetip",{title:y.title,zIndex:g,selector:b}),!z&&!C.splitTitle&&!s)return!0;C.local&&C.localPrefix&&(z=C.localPrefix+z),C.local&&C.hideLocal&&z&&t(z+":first").hide();var B,A,L,N,O,Y,E,M,D,H,X,R,W,$=parseInt(C.topOffset,10),q=parseInt(C.leftOffset,10),Q=isNaN(parseInt(C.height,10))?"auto":/\D/g.test(C.height)?C.height:C.height+"px",U=parseInt(C.width,10)||275,F=U+I+C.dropShadowSteps,G=this.offsetWidth,J="title"!=C.attribute?S.attrProp(C.titleAttribute)||"":"";C.splitTitle&&(W=J.split(C.splitTitle),J=C.showTitle||""===W[0]?W.shift():""),C.escapeTitle&&(J=J.replace(/&/g,"&").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var K=function(i){var r,v,m,g=C.onActivate.call(y,i);if(g===!1)return!1;if(k=!0,u=t(b).css({position:"absolute"}),d=u.find(w+"cluetip-outer"),p=u.find(w+"cluetip-inner"),f=u.find(w+"cluetip-title"),h=u.find(w+"cluetip-arrows"),u.removeClass().css({width:U}),z==S.attr("href")&&S.css("cursor",C.cursor),C.hoverClass&&S.addClass(C.hoverClass),N=O=S.offset().top,D=S.offset().left,G=S.innerWidth(),i.type==focus?(X=D+G/2+q,u.css({left:H}),E=O+$):(X=i.pageX,E=i.pageY),"area"!=y.tagName.toLowerCase()&&(L=t(document).scrollTop(),R=t(window).width()),"fixed"==C.positionBy?(H=G+D+q,u.css({left:H})):(H=G>D&&D>F||D+G+F+q>R?D-F-q:G+D+q,("area"==y.tagName.toLowerCase()||"mouse"==C.positionBy||G+F>R)&&(X+20+F>R?(u.addClass("cluetip-"+P),H=X-F-q>=0?X-F-q-parseInt(u.css("marginLeft"),10)+parseInt(p.css("marginRight"),10):X-F/2):H=X+q),r=0>H?i.pageY+$:i.pageY,(0>H||"bottomTop"==C.positionBy)&&(H=X+F/2>R?R/2-F/2:Math.max(X-F/2,0))),h.css({zIndex:S.data("cluetip").zIndex+1}),u.css({left:H,zIndex:S.data("cluetip").zIndex}),A=t(window).height(),s)"function"==typeof s&&(s=s.call(y)),p.html(s),V(r);else if(W){var I=W.length;if(p.html(I?W[0]:""),I>1)for(var j=1;I>j;j++)p.append('<div class="split-body">'+W[j]+"</div>");V(r)}else if(C.local||0===z.indexOf("#")){if(C.local){var B=t(z+(/^#\S+$/.test(z)?"":":eq("+a+")")).clone(!0).show();C.localIdSuffix&&B.attr("id",B[0].id+C.localIdSuffix),p.html(B),V(r)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(z))p.html('<img src="'+z+'" alt="'+J+'" />'),V(r);else{var Y=C.ajaxSettings.beforeSend,M=C.ajaxSettings.error,Q=C.ajaxSettings.success,K=C.ajaxSettings.complete;m=c(z,C.ajaxSettings.data);var Z={cache:C.ajaxCache,url:z,beforeSend:function(t,i){Y&&Y.call(y,t,u,p,i),d.children().empty(),C.waitImage&&e.css({top:E+20,left:X+20,zIndex:S.data("cluetip").zIndex-1}).show()},error:function(t,e){n.ajaxCache&&!o[m]&&(o[m]={status:"error",textStatus:e,xhr:t}),k&&(M?M.call(y,t,e,u,p):p.html("<i>sorry, the contents could not be loaded</i>"))},success:function(t,e,i){n.ajaxCache&&!o[m]&&(o[m]={status:"success",data:t,textStatus:e,xhr:i}),T=C.ajaxProcess.call(y,t),"object"==typeof T&&null!==T&&(J=T.title,T=T.content),k&&(Q&&Q.call(y,t,e,u,p),p.html(T))},complete:function(i,o){K&&K.call(y,i,o,u,p);var a=p[0].getElementsByTagName("img");l=a.length;for(var s=0,n=a.length;n>s;s++)a[s].complete&&l--;l&&!t.browser.opera?t(a).bind("load.ct error.ct",function(){l--,0===l&&(e.hide(),t(a).unbind(".ct"),k&&V(r))}):(e.hide(),k&&V(r))}};v=t.extend(!0,{},C.ajaxSettings,Z),o[m]?x(o[m],v):t.ajax(v)}},V=function(e){var o,a,l,s=J||C.showTitle&&"&nbsp;",n="",c="";if(u.addClass("cluetip-"+P),C.truncate){var m=p.text().slice(0,C.truncate)+"...";p.html(m)}s?f.show().html(s):f.hide(),C.sticky&&(o=t('<div class="cluetip-close"><a href="#">'+C.closeText+"</a></div>"),"bottom"==C.closePosition?o.appendTo(p):o.prependTo("title"==C.closePosition?f:p),o.bind("click.cluetip",function(){return _(),!1}),C.mouseOutClose?u.bind("mouseleave.cluetip",function(){_()}):u.unbind("mouseleave.cluetip")),d.css({zIndex:S.data("cluetip").zIndex,overflow:"auto"==Q?"visible":"auto",height:Q}),B="auto"==Q?Math.max(u.outerHeight(),u.height()):parseInt(Q,10),Y=O,M=L+A,"fixed"==C.positionBy?Y=O-C.dropShadowSteps+$:X>H&&Math.max(H,0)+F>X||"bottomTop"==C.positionBy?O+B+$>M&&E-L>B+$?(Y=E-B-$,c="top"):(Y=E+$,c="bottom"):Y=O+B+$>M?B>=A?L:M-B-$:"block"==S.css("display")||"area"==y.tagName.toLowerCase()||"mouse"==C.positionBy?e-$:O-C.dropShadowSteps,""===c&&(c=D>H?"left":"right"),a=" clue-"+c+"-"+P+" cluetip-"+P,"rounded"==P&&(a+=" ui-corner-all"),u.css({top:Y+"px"}).attrProp({className:i+a}),C.arrows?(/(left|right)/.test(c)&&(l=u.height()-h.height(),n=H>=0&&e>0?O-Y-C.dropShadowSteps:0,n=l>n?n:l,n+="px"),h.css({top:n}).show()):h.hide(),v=r(u,C),v&&v.length&&v.hide().css({height:B,width:U,zIndex:S.data("cluetip").zIndex-1}).show(),u.hide()[C.fx.open](C.fx.openSpeed||0),t.fn.bgiframe&&u.bgiframe(),C.delayedClose>0&&(j=setTimeout(_,C.delayedClose)),C.onShow.call(y,u,p)},Z=function(){k=!1,e.hide(),(!C.sticky||/click|toggle/.test(C.activation))&&(_(),clearTimeout(j)),C.hoverClass&&S.removeClass(C.hoverClass)},_=function(e){var i=e&&e.data("cluetip")?e:S,o=i.data("cluetip")&&i.data("cluetip").selector,a=o||"div.cluetip",l=t(a),s=l.find(w+"cluetip-inner"),n=l.find(w+"cluetip-arrows");l.hide().removeClass(),C.onHide.call(i[0],l,s),o&&(i.removeClass("cluetip-clicked"),i.css("cursor","")),o&&J&&i.attrProp(C.titleAttribute,J),C.arrows&&n.css({top:""})};if(t(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(e){_(t(e.target))}),/click|toggle/.test(C.activation))S.bind("click.cluetip",function(e){return u.is(":hidden")||!S.is(".cluetip-clicked")?(K(e),t(".cluetip-clicked").removeClass("cluetip-clicked"),S.addClass("cluetip-clicked")):Z(e),!1});else if("focus"==C.activation)S.bind("focus.cluetip",function(t){S.attrProp("title",""),K(t)}),S.bind("blur.cluetip",function(t){S.attrProp("title",S.data("cluetip").title),Z(t)});else{S[C.clickThrough?"unbind":"bind"]("click.cluetip",m);var te=function(t){if(C.tracking){var e=H-t.pageX,i=Y?Y-t.pageY:O-t.pageY;S.bind("mousemove.cluetip",function(t){u.css({left:t.pageX+e,top:t.pageY+i})})}};t.fn.hoverIntent&&C.hoverIntent?S.hoverIntent({sensitivity:C.hoverIntent.sensitivity,interval:C.hoverIntent.interval,over:function(t){K(t),te(t)},timeout:C.hoverIntent.timeout,out:function(t){Z(t),S.unbind("mousemove.cluetip")}}):S.bind("mouseenter.cluetip",function(t){K(t),te(t)}).bind("mouseleave.cluetip",function(t){Z(t),S.unbind("mousemove.cluetip")}),S.bind("mouseover.cluetip",function(){S.attrProp("title","")}).bind("mouseleave.cluetip",function(){S.attrProp("title",S.data("cluetip").title)})}}),this},function(){t.support=t.support||{};for(var e=document.createElement("div"),i=e.style,o=["boxShadow"],a=["moz","Moz","webkit","o"],l=0,s=o.length;s>l;l++){var n=o[l],c=n.charAt(0).toUpperCase()+n.slice(1);if("undefined"!=typeof i[n])t.support[n]=n;else for(var r=0,u=a.length;u>r;r++)if("undefined"!=typeof i[a[r]+c]){t.support[n]=a[r]+c;break}}e=null}(),t.fn.cluetip.defaults=t.cluetip.defaults}(jQuery);